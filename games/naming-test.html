<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Object Naming Test - ClawMD</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            background: linear-gradient(135deg, #1a2332 0%, #0f1419 100%); 
            color: #e8e6e3; 
            min-height: 100vh; 
            padding: 1rem;
        }
        .container { max-width: 600px; margin: 0 auto; }
        
        .header { text-align: center; margin-bottom: 1.5rem; padding: 1.5rem; background: rgba(139, 0, 0, 0.2); border-radius: 12px; border: 2px solid #C5A572; }
        .header h1 { color: #C5A572; font-size: 1.8rem; margin-bottom: 0.5rem; }
        .header p { color: #aaa; font-size: 1rem; }
        
        .disclaimer { 
            background: rgba(255, 193, 7, 0.15); 
            border: 2px solid #ffc107; 
            border-radius: 10px; 
            padding: 1rem; 
            margin-bottom: 1.5rem;
            font-size: 0.85rem;
        }
        .disclaimer strong { color: #ffc107; }
        
        .card { 
            background: rgba(0, 33, 71, 0.4); 
            border: 2px solid #C5A572; 
            border-radius: 12px; 
            padding: 1.5rem; 
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            height: 8px;
            background: #2a3441;
            border-radius: 4px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00ff88);
            transition: width 0.3s ease;
        }
        .progress-text {
            text-align: center;
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .object-display {
            text-align: center;
            padding: 2rem;
            margin: 1rem 0;
        }
        .object-emoji {
            font-size: 8rem;
            line-height: 1;
            margin-bottom: 1rem;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        
        .object-image {
            max-width: 200px;
            max-height: 200px;
            margin: 0 auto 1rem;
            display: block;
        }
        
        .question-text {
            font-size: 1.3rem;
            color: #C5A572;
            margin-bottom: 1rem;
        }
        
        .answer-input {
            width: 100%;
            padding: 1rem;
            font-size: 1.3rem;
            border: 3px solid #C5A572;
            border-radius: 10px;
            background: #1a2332;
            color: #e8e6e3;
            text-align: center;
        }
        .answer-input:focus { outline: none; border-color: #00d4aa; }
        
        .hint-text {
            margin-top: 1rem;
            color: #888;
            font-size: 0.95rem;
            text-align: center;
        }
        
        .btn { 
            background: linear-gradient(135deg, #8B0000 0%, #6B0000 100%); 
            color: #C5A572; 
            border: 2px solid #C5A572;
            padding: 1rem 2rem; 
            font-size: 1.1rem; 
            font-weight: 600;
            border-radius: 8px; 
            cursor: pointer; 
            min-height: 56px;
            transition: all 0.3s;
            margin: 0.5rem;
        }
        .btn:hover { background: linear-gradient(135deg, #A00000 0%, #8B0000 100%); }
        .btn.secondary { background: #2a3441; }
        .btn.hint-btn { background: rgba(255, 193, 7, 0.2); border-color: #ffc107; color: #ffc107; }
        
        .feedback {
            text-align: center;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 1.2rem;
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .feedback.correct { background: rgba(0, 212, 170, 0.2); border: 2px solid #00d4aa; color: #00d4aa; }
        .feedback.incorrect { background: rgba(231, 76, 60, 0.2); border: 2px solid #e74c3c; color: #e74c3c; }
        
        .score-display { 
            text-align: center;
            padding: 2rem; 
            background: rgba(0, 212, 170, 0.1); 
            border-radius: 12px; 
            margin: 1.5rem 0;
        }
        .score-big { font-size: 4rem; color: #00d4aa; font-weight: bold; }
        .score-label { font-size: 1.2rem; color: #C5A572; }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.75rem;
            margin: 1.5rem 0;
        }
        .result-item {
            background: #1a2332;
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
        }
        .result-item .emoji { font-size: 2rem; }
        .result-item .status { font-size: 0.8rem; margin-top: 0.25rem; }
        .result-item.correct .status { color: #00d4aa; }
        .result-item.incorrect .status { color: #e74c3c; }
        
        .interpretation { 
            padding: 1.5rem; 
            border-radius: 10px; 
            margin: 1rem 0;
            line-height: 1.6;
        }
        .interp-good { background: rgba(0, 212, 170, 0.2); border: 2px solid #00d4aa; }
        .interp-concern { background: rgba(255, 193, 7, 0.2); border: 2px solid #ffc107; }
        .interp-alert { background: rgba(244, 67, 54, 0.2); border: 2px solid #f44336; }
        
        .instructions {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .instructions h2 { color: #C5A572; margin-bottom: 1rem; }
        .instructions p { font-size: 1.1rem; line-height: 1.6; }
        
        .history-section { margin-top: 2rem; }
        .history-title { color: #C5A572; font-size: 1.2rem; margin-bottom: 1rem; text-align: center; }
        .history-list { background: #1a2332; border-radius: 8px; max-height: 200px; overflow-y: auto; }
        .history-item { 
            display: flex; 
            justify-content: space-between; 
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #2a3441;
        }
        
        .back-link { 
            display: inline-block; 
            color: #C5A572; 
            text-decoration: none; 
            margin-bottom: 1rem;
        }
        .back-link:hover { text-decoration: underline; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../games.html" class="back-link">‚Üê Back to Games</a>
        
        <div class="header">
            <h1>üè∑Ô∏è Object Naming Test</h1>
            <p>Visual Object Recognition Assessment</p>
        </div>
        
        <div class="disclaimer">
            <strong>‚ö†Ô∏è Note:</strong> This naming test is inspired by clinical confrontation naming assessments. 
            It tests your ability to retrieve object names from visual cues.
        </div>
        
        <!-- Intro -->
        <div class="card" id="introCard">
            <div class="instructions">
                <h2>How It Works</h2>
                <p>You'll see common objects one at a time.</p>
                <p>Type the name of each object as quickly as you can.</p>
                <p style="color: #888; margin-top: 1rem;">15 objects total ‚Ä¢ No time limit per item</p>
            </div>
            
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="btn" onclick="startTest()">Begin Test</button>
            </div>
        </div>
        
        <!-- Test Area -->
        <div class="card hidden" id="testCard">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Question 1 of 15</div>
            
            <div class="object-display">
                <div class="object-emoji" id="objectEmoji">üñäÔ∏è</div>
            </div>
            
            <p class="question-text">What is this object?</p>
            
            <input type="text" class="answer-input" id="answerInput" 
                   placeholder="Type the name..." 
                   autocomplete="off" autocapitalize="none">
            
            <div id="hintArea" class="hidden">
                <p class="hint-text" id="hintText"></p>
            </div>
            
            <div id="feedbackArea" class="hidden"></div>
            
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="btn" onclick="submitAnswer()">Submit Answer</button>
                <button class="btn hint-btn" onclick="showHint()" id="hintBtn">üí° Hint</button>
            </div>
        </div>
        
        <!-- Results -->
        <div class="card hidden" id="resultsCard">
            <h2 style="color: #C5A572; text-align: center; margin-bottom: 1rem;">üìä Results</h2>
            
            <div class="score-display">
                <div class="score-big" id="finalScore">0</div>
                <div class="score-label">out of 15 correct</div>
            </div>
            
            <div id="interpretation" class="interpretation"></div>
            
            <div class="results-grid" id="resultsGrid"></div>
            
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="btn" onclick="tryAgain()">üîÑ Try Again</button>
                <button class="btn secondary" onclick="window.print()">üñ®Ô∏è Print</button>
            </div>
        </div>
        
        <div class="history-section">
            <h3 class="history-title">üìà Previous Attempts</h3>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>
    
    <script>
        // Object database with multiple acceptable answers
        const objects = [
            { emoji: 'üñäÔ∏è', answers: ['pen', 'ballpoint', 'ballpoint pen'], hint: 'You write with it' },
            { emoji: '‚åö', answers: ['watch', 'wristwatch', 'timepiece'], hint: 'Tells time on your wrist' },
            { emoji: '‚úÇÔ∏è', answers: ['scissors', 'shears'], hint: 'Used for cutting' },
            { emoji: 'üîë', answers: ['key', 'keys'], hint: 'Opens locks' },
            { emoji: 'üì±', answers: ['phone', 'cellphone', 'cell phone', 'mobile', 'mobile phone', 'smartphone'], hint: 'You make calls with it' },
            { emoji: 'üëì', answers: ['glasses', 'eyeglasses', 'spectacles'], hint: 'Helps you see' },
            { emoji: 'ü™•', answers: ['toothbrush', 'tooth brush'], hint: 'For dental hygiene' },
            { emoji: 'ü™Æ', answers: ['comb', 'hair comb'], hint: 'For your hair' },
            { emoji: 'üî®', answers: ['hammer', 'mallet'], hint: 'Hits nails' },
            { emoji: '‚úèÔ∏è', answers: ['pencil'], hint: 'You write with it, has an eraser' },
            { emoji: 'üìö', answers: ['book', 'books'], hint: 'You read it' },
            { emoji: 'ü™ë', answers: ['chair', 'seat'], hint: 'You sit on it' },
            { emoji: 'üö™', answers: ['door'], hint: 'You open it to enter' },
            { emoji: 'üí°', answers: ['lightbulb', 'light bulb', 'bulb', 'lamp'], hint: 'Provides light' },
            { emoji: 'üßπ', answers: ['broom', 'sweeper'], hint: 'For sweeping floors' },
            { emoji: 'üîî', answers: ['bell'], hint: 'Makes a ringing sound' },
            { emoji: 'üß≤', answers: ['magnet'], hint: 'Attracts metal' },
            { emoji: 'ü™û', answers: ['mirror'], hint: 'Shows your reflection' },
            { emoji: '‚è∞', answers: ['clock', 'alarm clock', 'alarm'], hint: 'Tells time' },
            { emoji: 'üî¶', answers: ['flashlight', 'torch', 'flash light'], hint: 'Portable light' },
            { emoji: 'üìé', answers: ['paperclip', 'paper clip', 'clip'], hint: 'Holds papers together' },
            { emoji: 'üß≤', answers: ['magnet'], hint: 'Attracts metal objects' },
            { emoji: 'ü™£', answers: ['bucket', 'pail'], hint: 'Holds water' },
            { emoji: 'üß∫', answers: ['basket', 'laundry basket'], hint: 'For carrying things' },
            { emoji: 'üîß', answers: ['wrench', 'spanner'], hint: 'Tool for nuts and bolts' },
        ];
        
        let currentObjects = [];
        let currentIndex = 0;
        let results = [];
        let hintUsed = false;
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function startTest() {
            // Pick 15 random objects
            currentObjects = shuffleArray(objects).slice(0, 15);
            currentIndex = 0;
            results = [];
            
            document.getElementById('introCard').classList.add('hidden');
            document.getElementById('testCard').classList.remove('hidden');
            
            showCurrentObject();
        }
        
        function showCurrentObject() {
            const obj = currentObjects[currentIndex];
            
            document.getElementById('objectEmoji').textContent = obj.emoji;
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
            
            document.getElementById('hintArea').classList.add('hidden');
            document.getElementById('feedbackArea').classList.add('hidden');
            document.getElementById('hintBtn').disabled = false;
            hintUsed = false;
            
            updateProgress();
        }
        
        function updateProgress() {
            const progress = ((currentIndex) / 15) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Question ${currentIndex + 1} of 15`;
        }
        
        function showHint() {
            const obj = currentObjects[currentIndex];
            document.getElementById('hintText').textContent = `Hint: ${obj.hint}`;
            document.getElementById('hintArea').classList.remove('hidden');
            document.getElementById('hintBtn').disabled = true;
            hintUsed = true;
        }
        
        function submitAnswer() {
            const input = document.getElementById('answerInput');
            const answer = input.value.trim().toLowerCase();
            const obj = currentObjects[currentIndex];
            
            if (!answer) {
                input.focus();
                return;
            }
            
            // Check if answer matches any acceptable answer
            const isCorrect = obj.answers.some(a => {
                const normalized = a.toLowerCase();
                return answer === normalized || 
                       answer.includes(normalized) || 
                       normalized.includes(answer);
            });
            
            results.push({
                emoji: obj.emoji,
                userAnswer: answer,
                correct: isCorrect,
                hintUsed: hintUsed,
                acceptedAnswers: obj.answers
            });
            
            // Show feedback
            const feedback = document.getElementById('feedbackArea');
            feedback.classList.remove('hidden');
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `‚úì Correct! "${answer}"`;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `‚úó The answer was: ${obj.answers[0]}`;
            }
            
            // Move to next after delay
            setTimeout(() => {
                currentIndex++;
                
                if (currentIndex >= 15) {
                    showResults();
                } else {
                    showCurrentObject();
                }
            }, 1500);
        }
        
        // Handle Enter key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !document.getElementById('testCard').classList.contains('hidden')) {
                submitAnswer();
            }
        });
        
        function showResults() {
            document.getElementById('testCard').classList.add('hidden');
            document.getElementById('resultsCard').classList.remove('hidden');
            
            const correct = results.filter(r => r.correct).length;
            document.getElementById('finalScore').textContent = correct;
            
            // Results grid
            const grid = document.getElementById('resultsGrid');
            grid.innerHTML = results.map(r => `
                <div class="result-item ${r.correct ? 'correct' : 'incorrect'}">
                    <div class="emoji">${r.emoji}</div>
                    <div class="status">${r.correct ? '‚úì' : '‚úó'}</div>
                </div>
            `).join('');
            
            // Interpretation
            const interp = document.getElementById('interpretation');
            if (correct >= 14) {
                interp.className = 'interpretation interp-good';
                interp.innerHTML = '‚úÖ <strong>Excellent!</strong><br>Your object naming ability is very strong.';
            } else if (correct >= 12) {
                interp.className = 'interpretation interp-good';
                interp.innerHTML = 'üëç <strong>Good Performance!</strong><br>Your naming ability is within normal range.';
            } else if (correct >= 10) {
                interp.className = 'interpretation interp-concern';
                interp.innerHTML = '‚ö†Ô∏è <strong>Mild Difficulty</strong><br>Some word-finding difficulty noted. This can be normal but consider discussing with your doctor if concerned.';
            } else {
                interp.className = 'interpretation interp-alert';
                interp.innerHTML = 'üî¥ <strong>Please Seek Evaluation</strong><br>Significant naming difficulty detected. We recommend discussing these results with a healthcare provider.';
            }
            
            // Save history
            saveHistory(correct);
            displayHistory();
        }
        
        function saveHistory(score) {
            const history = JSON.parse(localStorage.getItem('namingTestHistory') || '[]');
            history.push({
                date: new Date().toISOString(),
                score: score
            });
            if (history.length > 20) history.shift();
            localStorage.setItem('namingTestHistory', JSON.stringify(history));
        }
        
        function displayHistory() {
            const history = JSON.parse(localStorage.getItem('namingTestHistory') || '[]');
            const list = document.getElementById('historyList');
            
            if (history.length === 0) {
                list.innerHTML = '<div style="padding: 1rem; text-align: center; color: #888;">No previous attempts</div>';
                return;
            }
            
            list.innerHTML = history.slice(-10).reverse().map(h => {
                const date = new Date(h.date).toLocaleDateString();
                return `<div class="history-item">
                    <span style="color: #888;">${date}</span>
                    <span style="color: #00d4aa; font-weight: bold;">${h.score}/15</span>
                </div>`;
            }).join('');
        }
        
        function tryAgain() {
            document.getElementById('resultsCard').classList.add('hidden');
            document.getElementById('introCard').classList.remove('hidden');
        }
        
        // Initialize
        displayHistory();
    </script>
</body>
</html>
